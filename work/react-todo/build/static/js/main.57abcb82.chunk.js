(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(6),o=n.n(r),l=(n(12),n(1)),u=(n(5),function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():Promise.reject({code:"login-invalid"})}))}),s=function(e,t,n,a,c){return fetch("/tasks/".concat(e,"/").concat(t),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:{taskName:n,taskContent:a,isComplete:c}})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},i=function(e){e.user;var t=e.onLogin,n=Object(a.useState)(""),r=Object(l.a)(n,2),o=r[0],u=r[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),m=i[0],d=i[1],f=Object(a.useState)(""),h=Object(l.a)(f,2),E=h[0],k=h[1],v=function(){E?(u(""),d(!0),function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(E).then((function(){return t(E)})).catch((function(e){u(e.message),d(!1)}))):u("Invalid username, try again!")};return c.a.createElement("div",{className:"login"},c.a.createElement("p",{className:"error"},o),m?c.a.createElement("span",null,"Loading..."):c.a.createElement("div",null,c.a.createElement("h2",null,"Please Login"),c.a.createElement("div",{className:"input-username"},c.a.createElement("input",{placeholder:"Username",onChange:function(e){return k(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?v():null}}),c.a.createElement("button",{onClick:v},"Login"))))},m=function(e){var t=e.onLogout;return c.a.createElement("div",{className:"logout"},c.a.createElement("button",{onClick:function(){fetch("/session",{method:"DELETE"}).then((function(e){e.ok})).then((function(){return t()}))}},"Logout"))},d=n(2);function f(e){var t=e.setCreate,n=e.username,r=e.todoList,o=Object(a.useState)(""),u=Object(l.a)(o,2),s=u[0],i=u[1],m=Object(a.useState)(""),d=Object(l.a)(m,2),f=d[0],h=d[1],E=Object(a.useState)(""),k=Object(l.a)(E,2),v=k[0],b=k[1];return c.a.createElement("div",{className:"create-page"},c.a.createElement("p",null,v),c.a.createElement("input",{value:f,onChange:function(e){return h(e.target.value)},placeholder:"Enter task name..."}),c.a.createElement("br",null),c.a.createElement("textarea",{value:s,onChange:function(e){return i(e.target.value)},placeholder:"Enter task details..."}),c.a.createElement("br",null),c.a.createElement("button",{className:"button",onClick:function(){(function(e,t,n,a){return fetch("/tasks/".concat(e),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:{taskName:t,taskContent:n,isComplete:a}})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(n,f,s,!1).then((function(e){var n=e.data;r.push(n),t(!1)})).catch((function(e){b(e.message)}))}},"ADD"),c.a.createElement("button",{className:"button",onClick:function(){t(!1)}},"BACK"))}function h(e){var t=e.setUpdate,n=e.username,r=e.clickedTaskId,o=e.clickedTaskName,u=e.clickedTaskContent,i=e.onUpdateSuccess,m=Object(a.useState)(u),d=Object(l.a)(m,2),f=d[0],h=d[1],E=Object(a.useState)(o),k=Object(l.a)(E,2),v=k[0],b=k[1];return c.a.createElement("div",{className:"update-page"},c.a.createElement("label",null,"Task name: "),c.a.createElement("input",{value:v,onChange:function(e){return b(e.target.value)}}),c.a.createElement("br",null),c.a.createElement("label",null,"Task details: "),c.a.createElement("textarea",{value:f,onChange:function(e){return h(e.target.value)}}),c.a.createElement("br",null),c.a.createElement("button",{className:"button",onClick:function(){s(n,r,v,f,!1).then((function(e){i(e.data)}))}},"Update"),c.a.createElement("button",{className:"button",onClick:function(){t(!1)}},"Back"))}function E(e){var t=e.setView,n=e.clickedTaskName,a=e.clickedTaskContent;return c.a.createElement("div",{className:"detail-page"},c.a.createElement("div",{className:"task-name"},c.a.createElement("h3",null,"Task Name: "),c.a.createElement("span",null,n)),c.a.createElement("div",{className:"task-details"},c.a.createElement("h3",null,"Task Details: "),c.a.createElement("p",null,a)),c.a.createElement("button",{className:"button",onClick:function(){t(!1)}},"Back"))}function k(e){var t=e.onFilter;return c.a.createElement("div",{className:"filter-bar"},c.a.createElement("label",null,"Filter: "),c.a.createElement("select",{onChange:function(e){return t(e.target.value)}},c.a.createElement("option",{value:"all"},"All"),c.a.createElement("option",{value:"undo"},"Todo")))}function v(e){var t=e.onSort;return c.a.createElement("div",{className:"sort-bar"},c.a.createElement("label",null,"Sort: "),c.a.createElement("select",{onChange:function(e){return t(e.target.value)}},c.a.createElement("option",{value:"default"},"Default"),c.a.createElement("option",{value:"up"},"By name ascending"),c.a.createElement("option",{value:"down"},"By name descending"),c.a.createElement("option",{value:"byUndo"},"By todo"),c.a.createElement("option",{value:"byDone"},"By completed")))}function b(e){var t=e.updateTheme;return c.a.createElement("div",{className:"theme-bar"},c.a.createElement("label",null,"Theme: "),c.a.createElement("select",{onChange:function(e){return t(e.target.value)}},c.a.createElement("option",{value:"Default"},"Default"),c.a.createElement("option",{value:"Dark"},"Dark"),c.a.createElement("option",{value:"Light"},"Light"),c.a.createElement("option",{value:"Colorful"},"Colorful")))}function p(e){var t=e.user,n=Object(a.useState)([]),r=Object(l.a)(n,2),o=r[0],i=r[1],m=Object(a.useState)(!1),p=Object(l.a)(m,2),j=p[0],g=p[1],O=Object(a.useState)(!1),N=Object(l.a)(O,2),C=N[0],y=N[1],S=Object(a.useState)(!1),T=Object(l.a)(S,2),w=T[0],L=T[1],P=t.username,I=Object(a.useState)(""),D=Object(l.a)(I,2),U=D[0],B=D[1],J=Object(a.useState)(""),A=Object(l.a)(J,2),H=A[0],x=A[1],F=Object(a.useState)(""),R=Object(l.a)(F,2),V=R[0],G=R[1],K=Object(a.useState)("Default"),M=Object(l.a)(K,2),W=M[0],$=M[1];Object(a.useEffect)((function(){u(t.username).then((function(e){i(Object.values(e.data))}))}),[]);var q={backgroundColor:"Dark"===W?"#333":"Light"===W?"#ccc":"Colorful"===W?"red":""},z=function(e){(function(e,t){return fetch("/tasks/".concat(e,"/").concat(t),{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(t.username,e).then((function(e){i(o.filter((function(t){return t.taskId!==e.data.taskId})))}))},Q=function(e){var t,n=[],a=Object(d.a)(o);try{for(a.s();!(t=a.n()).done;){var c=t.value;c.taskId===e.taskId?n.push(e):n.push(c)}}catch(r){a.e(r)}finally{a.f()}i(n),g(!1)},X=Object(a.useState)(!0),Y=Object(l.a)(X,2),Z=Y[0],_=Y[1],ee=o.map((function(e){return c.a.createElement("li",{className:"task-content",key:e.taskId},c.a.createElement("span",{className:e.isComplete?"complete":""},e.taskName),c.a.createElement("span",{className:"done",onClick:function(){return function(e){s(P,e.taskId,e.taskName,e.taskContent,Z).then((function(e){Q(e.data),_(!Z)}))}(e)}},e.isComplete?"Undo":"Mark as done"),c.a.createElement("span",{className:"view",onClick:function(){return t=e.taskName,n=e.taskContent,L(!0),x(t),void G(n);var t,n}},"View"),c.a.createElement("span",{className:"edit",onClick:function(){return t=e.taskName,n=e.taskContent,a=e.taskId,g(!0),B(a),x(t),void G(n);var t,n,a}},"Edit"),c.a.createElement("span",{className:"remove",onClick:function(){return z(e.taskId)}},"Remove"))}));return c.a.createElement("div",null," ",C?c.a.createElement("div",null,c.a.createElement(f,{setCreate:y,username:P,todoList:o})):j?c.a.createElement("div",null,c.a.createElement(h,{setUpdate:g,username:P,clickedTaskId:U,clickedTaskName:H,clickedTaskContent:V,onUpdateSuccess:Q})):w?c.a.createElement("div",null,c.a.createElement(E,{setView:L,clickedTaskName:H,clickedTaskContent:V})):c.a.createElement("div",{className:"todo-panel",style:q},c.a.createElement("h1",null,"Task List"),c.a.createElement("div",{className:"title-bar"},c.a.createElement(b,{updateTheme:function(e){(function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({theme:t})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(t.username,e).then((function(){$(e)}))}}),c.a.createElement(k,{onFilter:function(e){if("undo"===e){var n,a=[],c=Object(d.a)(o);try{for(c.s();!(n=c.n()).done;){var r=n.value;r.isComplete||a.push(r)}}catch(l){c.e(l)}finally{c.f()}i(a)}else u(t.username).then((function(e){i(Object.values(e.data))}))}}),c.a.createElement(v,{onSort:function(e){var n,a=[],c=[],r=[],l=Object(d.a)(o);try{for(l.s();!(n=l.n()).done;){var s=n.value;a.push(s)}}catch(E){l.e(E)}finally{l.f()}var m,f=Object(d.a)(o);try{for(f.s();!(m=f.n()).done;){var h=m.value;h.isComplete?r.push(h):c.push(h)}}catch(E){f.e(E)}finally{f.f()}"up"===e?(a.sort((function(e,t){return e.taskName.localeCompare(t.taskName)})),i(a)):"down"===e?(a.sort((function(e,t){return t.taskName.localeCompare(e.taskName)})),i(a)):"byUndo"===e?i(c.concat(r)):"byDone"===e?i(r.concat(c)):u(t.username).then((function(e){i(Object.values(e.data))}))}}),c.a.createElement("button",{className:"refresh-bar",onClick:function(){var e,t=[],n=Object(d.a)(o);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a)}}catch(c){n.e(c)}finally{n.f()}i(t)}},"Refresh")),ee,c.a.createElement("button",{className:"create",onClick:function(){y(!0)}},"CREATE")))}var j=function(){var e=Object(a.useState)({isLoggedIn:!1,username:"",theme:""}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():Promise.reject({code:"login-invalid"})})).then((function(e){r({isLoggedIn:!0,username:e.data.username,theme:e.data.theme})}))}),[]),console.log("theme after login: "+n.theme),console.log("username: "+n.username),c.a.createElement("div",null," ",n.isLoggedIn?c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(p,{user:n})),c.a.createElement("div",null,c.a.createElement(m,{onLogout:function(){r({isLoggedIn:!1,username:""})}}))):c.a.createElement(i,{className:"login",user:n,onLogin:function(e){r({isLoggedIn:!0,username:e})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){},7:function(e,t,n){e.exports=n(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.57abcb82.chunk.js.map